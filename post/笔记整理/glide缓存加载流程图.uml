@startuml
skin rose
start
:开始获取图片;
if(内存活跃缓存中是否有缓存?) then (是)
    :返回缓存中的数据;
    :将图片使用标记+1;
else (否)
    if(内存缓存中是否有缓存?) then (是)
        :返回内存缓存中的数据;
        :从内存缓存中移除数据;
        :将数据移入到活跃缓存中;
        :将图片使用标记+1;
    else (否)
        if(磁盘缓存中是否有指定尺寸的图片缓存?) then (是)
            :将数据加入到活跃缓存中;
            :将图片使用标记+1;
        else (否)
            if(磁盘缓存中是否存在原始图片缓存?) then (是)
                :按照指定尺寸进行解码图片;
                :将数据加入到活跃缓存中;
                :将图片使用标记+1;
                :将解码后的图片进行本地磁盘存储;
            else (否)
                :进行网络加载图片;
                :将原始图片进行本地磁盘存储;
                :按照指定尺寸进行解码图片;
                :将数据加入到活跃缓存中;
                :将图片使用标记+1;
                :将解码后的图片进行本地磁盘存储;
            endif    
        endif
    endif    
endif
:展示到imageView上;   
end

@enduml